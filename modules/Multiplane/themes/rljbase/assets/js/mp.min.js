/*
cpmultiplane-theme-rljbase - version: 0.1.1
Copyright Â© 2020 Raffael Jesche, MIT Licensed, https://github.com/raffaelj/CpMultiplane
*/
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).MP=t()}}(function(){return function a(r,s,l){function c(e,t){if(!s[e]){if(!r[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(d)return d(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var o=s[e]={exports:{}};r[e][0].call(o.exports,function(t){return c(r[e][1][t]||t)},o,o.exports,a,r,s,l)}return s[e].exports}for(var d="function"==typeof require&&require,t=0;t<l.length;t++)c(l[t]);return c}({1:[function(t,e,i){var n=t("./mp/MP.js");n.Cookie=t("./mp/Cookie.js"),n.Carousel=t("./mp/SimpleCarousel.js"),n.Lightbox=t("./mp/SimpleLightbox.js"),n.Video=t("./mp/SimpleVideo.js"),n.Privacy=t("./mp/Privacy.js"),n.Modal=t("./mp/SimpleModalManager.js"),n.on("privacy",function(t){t.params.event&&t.params.cookie&&("1"==n.Cookie.get(t.params.cookie)?n.trigger(t.params.event,t.params):n.Privacy.displayPrivacyNotice(t.params))}),n.convertVideoLinksToIframes=function(){n.Video.convertVideoLinksToIframes()},n.replaceVideoLink=function(){n.Video.replaceVideoLink()},e.exports=n},{"./mp/Cookie.js":2,"./mp/MP.js":3,"./mp/Privacy.js":4,"./mp/SimpleCarousel.js":5,"./mp/SimpleLightbox.js":6,"./mp/SimpleModalManager.js":7,"./mp/SimpleVideo.js":8}],2:[function(t,e,i){e.exports={lifeTime:"30",set:function(t,e,i){if(t&&(e||0==e)){i||0==i||(i=this.lifeTime);var n=new Date;n.setTime(n.getTime()+864e5*i),document.cookie=t+"="+e+";expires="+n.toUTCString()+"; path=/"}},get:function(t){if(""!=document.cookie){var e=document.cookie.split("; ").reduce(function(t,e){var i=e.split("=");return 2===i.length&&(t[i[0]]=i[1]),t},{});return t?e[t]:e}},destroy:function(t){this.set(t,"",0)}}},{}],3:[function(t,e,i){var a=document;if(!(window.Promise&&window.FormData||"undefined"==typeof MP_POLYFILLS_URL)){var n=a.createElement("script");n.src=MP_POLYFILLS_URL,a.head.appendChild(n)}e.exports={base_route:"undefined"!=typeof MP_BASE_URL?MP_BASE_URL:"",base_url:"undefined"!=typeof MP_BASE_URL?MP_BASE_URL:"",_events:{},route:function(t){return this.base_route+t},ready:function(t){"loading"!=a.readyState?t():a.addEventListener?a.addEventListener("DOMContentLoaded",t):a.attachEvent("onreadystatechange",function(){"loading"!=a.readyState&&t()})},visible:function(t,e){var i,n,o={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};for(i in o)if(i in a){n=o[i];break}return"function"==typeof t&&"function"==typeof e?a.addEventListener(n,function(){a[i]?e():t()}):"function"==typeof t&&a.addEventListener(n,function(){t()}),!a[i]},request:function(e,o,a){return e=this.route(e),a=a||"json",new Promise(function(t,i){var n=new XMLHttpRequest;n.open("post",e,!0),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),e+=(-1!==e.indexOf("?")?"&":"?")+"nc="+Math.random().toString(36).substr(2),o&&("object"==typeof o&&o instanceof HTMLFormElement?o=new FormData(o):"object"==typeof o&&o instanceof FormData||"object"==typeof o&&(n.setRequestHeader("Content-Type","application/json; charset=UTF-8"),o=JSON.stringify(o||{}))),n.onloadend=function(){var e=n.responseText;if("json"==a)try{e=JSON.parse(n.responseText)}catch(t){e=null}200==this.status?t(e,n):i(e,n)},n.send(o)})},on:function(t,e){this._events[t]||(this._events[t]=[]),this._events[t].push(e)},off:function(t,e){if(this._events[t])if(e){for(var i=0;i<this._events[t].length;i++)if(this._events[t][i]===e){this._events[t].splice(i,1);break}}else this._events[t]=[]},trigger:function(t,e){if(this._events[t])for(var i={name:t,params:e},n=0;n<this._events[t].length;n++)this._events[t][n].apply(MP,[i])}}},{}],4:[function(t,e,i){var n=document,s=t("./MP.js"),o=t("./SimpleModalManager.js"),l=t("./Cookie.js");e.exports={modalSelector:"privacy-notice",formSelector:"privacy-notice-form",modal:null,initialized:!1,initializedEvents:!1,active:!1,lastFocus:null,init:function(t){t&&(t.modalSelector&&(this.modalSelector=t.modalSelector),t.formSelector&&(this.formSelector=t.formSelector)),this.modal=n.getElementById(this.modalSelector),this.modal&&(this.initialized=!0)},displayPrivacyNotice:function(o){this.initialized||this.init();var a=this,t=o.target||n.activeElement,r=n.getElementById(this.formSelector);r&&(this.lastFocus=t,this.show(),this.initializedEvents||(r.addEventListener("submit",function(t){t&&t.preventDefault();var e=new FormData(r);s.trigger("privacy.form.submit",e);for(var i=e.entries(),n=i.next();!n.done;)l.set(n.value[0],n.value[1]),n=i.next();s.trigger("privacy",o),a.hide()}),r.addEventListener("reset",function(t){s.trigger("privacy.form.reset"),a.hide()}),this.initializedEvents=!0))},show:function(){this.initialized||this.init();var t=this;this.active=!0,this.modal.classList.add("show"),this.modal.tabIndex=-1,this.modal.setAttribute("role","dialog"),this.modal.focus(),s.trigger("privacy.show"),o.keepFocus({modal:this.modal,condition:function(){return t.active},priority:1e3,elements:"button,a,input"})},hide:function(){this.initialized||this.init(),this.active=!1,this.modal.classList.remove("show"),this.lastFocus.focus()}}},{"./Cookie.js":2,"./MP.js":3,"./SimpleModalManager.js":7}],5:[function(t,e,i){var o=window,a=document;MP=t("./MP.js"),e.exports={selector:"",carousels:[],autoplay:!0,duration:15e3,init:function(e){var n=this;e&&("string"==typeof e?this.selector=e:Object.keys(e).forEach(function(t){n[t]=e[t]}),Array.prototype.forEach.call(a.querySelectorAll(this.selector),function(t,e){n.carousels.push({paused:!1,node:t,interval:null})}),this.carousels.length&&Array.prototype.forEach.call(this.carousels,function(e,t){var i=a.createElement("a");i.setAttribute("href","#"),i.classList.add("icon-pause"),i.setAttribute("aria-label","start/stop image carousel"),i.tabIndex=0,e.node.appendChild(i),o.addEventListener("resize",function(){e.node.style.height=e.node.children[0].offsetHeight+"px"}),o.addEventListener("load",function(){var t;"function"==typeof Event?t=new Event("resize"):(t=a.createEvent("Event")).initEvent("resize",!0,!0),o.dispatchEvent(t)}),e.node.addEventListener("click",function(t){t&&t.preventDefault(),e.paused=!e.paused,e.paused?(i.classList.remove("icon-pause"),i.classList.add("icon-play"),n.pause(e)):(i.classList.remove("icon-play"),i.classList.add("icon-pause"),n.play(e))}),MP.visible(function(){n.play(e)},function(){n.pause(e)}),n.autoplay&&!e.paused&&n.play(e)}))},play:function(t){return!t.paused&&(t.interval||(t.interval=this.animate(t)),t.interval)},pause:function(t){window.clearInterval(t.interval),t.interval=!1},animate:function(i){return setInterval(function(){var t=i.node.querySelector(".current"),e=t.nextElementSibling;e&&"A"!=e.nodeName||(e=i.node.firstElementChild),"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"==e.getAttribute("src")&&e.setAttribute("src",e.dataset.src),t.classList.remove("current"),e.classList.add("current")},this.duration)}}},{"./MP.js":3}],6:[function(t,e,i){var a=document,n=t("./SimpleModalManager.js");e.exports={selector:"",group:null,active:!1,currentItem:null,currentGallery:null,galleries:[],captions:[],img:null,lightbox:null,wrap:null,caption:null,closeButton:null,prevButton:null,nextButton:null,lastFocus:null,init:function(e){var o=this;if(e){if("string"==typeof e?this.selector=e:Object.keys(e).forEach(function(t){o[t]=e[t]}),this.group){var t=a.querySelectorAll(this.group);Array.prototype.forEach.call(t,function(t,e){o.galleries.push(t.querySelectorAll(o.selector))})}else this.galleries.push(a.querySelectorAll(this.selector));this.galleries.length<1||(this.addLightboxToDOM(),Array.prototype.forEach.call(this.galleries,function(t,n){o.captions[n]={},Array.prototype.forEach.call(t,function(e,i){e.addEventListener("click",function(t){t&&t.preventDefault(),o.lastFocus=e||a.activeElement,o.active=!0,o.currentItem=i,o.currentGallery=n,o.update()});var t=e.parentNode.querySelector("figcaption");t?o.captions[n][i]=t.innerHTML:e.getAttribute("title")?o.captions[n][i]=e.getAttribute("title").replace(/(\r\n|\n\r|\r|\n)/g,"<br>$1"):e.dataset.title&&(o.captions[n][i]=e.dataset.title.replace(/(\r\n|\n\r|\r|\n)/g,"<br>$1"))})}),this.prevButton.addEventListener("click",function(t){t&&(t.preventDefault(),t.stopPropagation()),o.prev(t)}),this.nextButton.addEventListener("click",function(t){t&&(t.preventDefault(),t.stopPropagation()),o.next(t)}),this.closeButton.addEventListener("click",function(t){t&&t.preventDefault()}),this.lightbox.addEventListener("click",function(t){t&&"IMG"==t.target.nodeName||o.close(t)}),n.keepFocus({modal:this.lightbox,condition:function(){return o.active},priority:10,elements:"a.icon-close"}),a.addEventListener("keydown",function(t){o.active&&(37==t.keyCode&&o.prev(t),39==t.keyCode&&o.next(t),27==t.keyCode&&o.close(t))}))}},addLightboxToDOM:function(){this.img=a.createElement("img"),this.lightbox=a.createElement("div"),this.wrap=a.createElement("div"),this.caption=a.createElement("div"),this.closeButton=a.createElement("a"),this.prevButton=a.createElement("a"),this.nextButton=a.createElement("a"),this.lightbox.setAttribute("class","lightbox"),this.lightbox.setAttribute("role","dialog"),this.lightbox.setAttribute("aria-hidden","true"),this.lightbox.tabIndex=-1,a.querySelector("body").appendChild(this.lightbox),this.prevButton.setAttribute("href","#"),this.nextButton.setAttribute("href","#"),this.closeButton.setAttribute("href","#"),this.prevButton.setAttribute("aria-label","previous"),this.nextButton.setAttribute("aria-label","next"),this.closeButton.setAttribute("aria-label","close"),this.prevButton.classList.add("prev"),this.nextButton.classList.add("next"),this.closeButton.classList.add("icon-close"),this.lightbox.appendChild(this.wrap),this.lightbox.appendChild(this.prevButton),this.lightbox.appendChild(this.nextButton),this.lightbox.appendChild(this.closeButton),this.wrap.appendChild(this.img)},update:function(){if(!this.active)return this.lightbox.classList.remove("active"),this.lightbox.setAttribute("aria-hidden","true"),void this.lastFocus.focus();this.lightbox.classList.add("active"),this.lightbox.focus(),0==this.currentItem?this.prevButton.classList.add("hidden"):this.prevButton.classList.remove("hidden"),this.currentItem==this.galleries[this.currentGallery].length-1?this.nextButton.classList.add("hidden"):this.nextButton.classList.remove("hidden"),this.img.setAttribute("src",this.galleries[this.currentGallery][this.currentItem].getAttribute("href")),this.captions[this.currentGallery][this.currentItem]?(this.caption.innerHTML=this.captions[this.currentGallery][this.currentItem],this.wrap.appendChild(this.caption)):this.wrap.contains(this.caption)&&this.wrap.removeChild(this.caption)},prev:function(t){this.galleries[this.currentGallery][this.currentItem-1]&&(this.currentItem-=1,this.update())},next:function(t){this.galleries[this.currentGallery][this.currentItem+1]&&(this.currentItem+=1,this.update())},close:function(t){this.active=!1,this.update()}}},{"./SimpleModalManager.js":7}],7:[function(t,e,i){e.exports={modals:[],conditions:[],priorities:[],focuses:[],initialized:!1,focusableElements:'a:not([disabled]), button:not([disabled]), textarea:not([disabled]), input:not([type="hidden"]):not([disabled]), select:not([disabled]), [tabindex]:not([tabindex="-1"]',keepFocus:function(t){var e=t.modal||null;e&&(-1==this.modals.indexOf(e)&&(this.modals.push(e),this.conditions.push(t.condition||function(){return!1}),this.priorities.push(t.priority||10),this.focuses.push(e.querySelectorAll(t.elements||this.focusableElements))),this.initialized||this.holdFocus())},holdFocus:function(){var a=this;document.addEventListener("keydown",function(t){a.tabKey=9==t.keyCode,a.shiftKey=t.shiftKey}),document.addEventListener("focus",function(i){var n=null,o=[];if(Array.prototype.forEach.call(a.modals,function(t,e){a.conditions[e]()&&(o.push(a.priorities[e]),t.contains(i.target)&&(n=e))}),null===n&&0<o.length){var t=Math.max.apply(null,o),e=a.priorities.indexOf(t);if(-1==e)return;i.stopPropagation(),a.focuses[e]||a.focuses[e][0]?a.tabKey&&a.shiftKey?a.focuses[e][a.focuses[e].length-1].focus():a.focuses[e][0].focus():a.modals[e].focus()}},!0),this.initialized=!0}}},{}],8:[function(t,e,i){var h=document,p=t("./MP.js");e.exports={convertVideoLinksToIframes:function(){var e=this,t=h.querySelectorAll("a[data-video-id]");Array.prototype.forEach.call(t,function(t,e){var i=t.getAttribute("data-video-id"),n=t.getAttribute("data-video-provider"),o=t.getAttribute("data-video-thumb"),a=370,r="",s="",l="";(data_width=t.getAttribute("data-video-width"))&&(data_height=t.getAttribute("data-video-height"))&&(a=data_height/data_width*480,r=data_width/data_height==16/9?"16-9":"4-3"),s=0==o.indexOf("http")||-1!=o.indexOf(".")?o:p.base_url+"/getImage?src="+o+"&w=480&o=1","youtube"==n&&(r="16-9",l="https://www.youtube-nocookie.com/embed/"+i+"?enablejsapi=1&rel=0&showinfo=0&autoplay=1"),"vimeo"==n&&(l="https://player.vimeo.com/video/"+i+"?color=ffffff&title=0&byline=0&portrait=0&autoplay=1");var c=h.createElement("div");c.classList.add("video_embed_container"),c.classList.add("ratio-"+r);var d=h.createElement("iframe");d.classList.add("video_embed"),d.setAttribute("width",480),d.setAttribute("height",a),d.setAttribute("src","about:blank"),d.setAttribute("data-src",l),d.setAttribute("data-provider",n),d.setAttribute("src","about:blank"),d.setAttribute("allow","autoplay; fullscreen"),d.setAttribute("allowfullscreen",""),d.setAttribute("title","Video"),d.style["background-image"]="url("+s+")",d.getAttribute("id")||d.setAttribute("id","player_"+Math.random().toString(36).substring(2)),d.tabIndex=-1,c.appendChild(d);var u=h.createElement("a");u.setAttribute("class","icon-play"),u.setAttribute("href","#"),u.setAttribute("aria-label","Play"),u.tabIndex=0,c.appendChild(u),t.parentNode.insertBefore(c,t),u.addEventListener("click",function(t){t&&t.preventDefault(),p.trigger("privacy",{type:"external_video",target:d,cookie:"loadExternalVideos",event:"external_video"})})}),p.on("external_video",function(t){t&&t.params&&t.params.target&&e.loadVideo(t.params.target)})},replaceVideoLink:function(){var e=this,t=h.querySelectorAll(".video_embed");Array.prototype.forEach.call(t,function(e,t){e.tabIndex=-1,e.getAttribute("id")||e.setAttribute("id","player_"+Math.random().toString(36).substring(2)),e.nextElementSibling.addEventListener("click",function(t){t&&t.preventDefault(),p.trigger("privacy",{type:"external_video",target:e,cookie:"loadExternalVideos",event:"external_video"})})}),p.on("external_video",function(t){t&&t.params&&t.params.target&&e.loadVideo(t.params.target)})},loadVideo:function(t){var e=this,i=t.getAttribute("id");volume=t.dataset.volume||50,t.focus(),t.removeAttribute("tabindex"),t.setAttribute("src",t.getAttribute("data-src")),t.style["background-image"]="","youtube"==t.dataset.provider&&this.callPlayer(i,function(){e.callPlayer(i,"setVolume",[volume,!0]),e.callPlayer(i,"playVideo")})},callPlayer:function(i,t,e){var n=this;window.jQuery&&i instanceof jQuery&&(i=i.get(0).id);var o=document.getElementById(i);o&&"IFRAME"!=o.tagName.toUpperCase()&&(o=o.getElementsByTagName("iframe")[0]),this.callPlayer.queue||(this.callPlayer.queue={});var a=this.callPlayer.queue[i],r="complete"==document.readyState;if(r&&!o)window.console&&console.log("callPlayer: Frame not found; id="+i),a&&clearInterval(a.poller);else if("listening"===t)o&&o.contentWindow&&(t='{"event":"listening","id":'+JSON.stringify(""+i)+"}",o.contentWindow.postMessage(t,"*"));else if(a&&a.ready||r&&(!o||o.contentWindow)&&"function"!=typeof t){if(o&&o.contentWindow){if(t.call)return t();o.contentWindow.postMessage(JSON.stringify({event:"command",func:t,args:e||[],id:i}),"*")}}else(a=a||(this.callPlayer.queue[i]=[])).push([t,e]),"poller"in a||(a.poller=setInterval(function(){n.callPlayer(i,"listening")},250),s(1,function t(e){if(!o){if(!(o=document.getElementById(i)))return;if("IFRAME"!=o.tagName.toUpperCase()&&!(o=o.getElementsByTagName("iframe")[0]))return}if(e.source===o.contentWindow)for(clearInterval(a.poller),a.ready=!0,s(0,t);tmp=a.shift();)n.callPlayer(i,tmp[0],tmp[1])}));function s(t,e){var i=t?window.addEventListener:window.removeEventListener;i?i("message",e,!1):(t?window.attachEvent:window.detachEvent)("onmessage",e)}}}},{"./MP.js":3}]},{},[1])(1)});
