!function(g,d){MP_BASE_URL=MP_BASE_URL||"";var MP={base_route:MP_BASE_URL,base_url:MP_BASE_URL,route:function(url){return this.base_route+url},ready:function(fn){"loading"!=d.readyState?fn():d.addEventListener?d.addEventListener("DOMContentLoaded",fn):d.attachEvent("onreadystatechange",function(){"loading"!=d.readyState&&fn()})},visible:function(fn,fm){var stateKey,eventKey,keys={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};for(stateKey in keys)if(stateKey in d){eventKey=keys[stateKey];break}return"function"==typeof fn&&"function"==typeof fm?d.addEventListener(eventKey,function(){d[stateKey]?fm():fn()}):"function"==typeof fn&&d.addEventListener(eventKey,function(){fn()}),!d[stateKey]},request:function(url,data,type){return url=this.route(url),type=type||"json",new Promise(function(fulfill,reject){var xhr=new XMLHttpRequest;xhr.open("post",url,!0),xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),url+=(-1!==url.indexOf("?")?"&":"?")+"nc="+Math.random().toString(36).substr(2),data&&("object"==typeof data&&data instanceof HTMLFormElement?data=new FormData(data):"object"==typeof data&&data instanceof FormData||"object"==typeof data&&(xhr.setRequestHeader("Content-Type","application/json; charset=UTF-8"),data=JSON.stringify(data||{}))),xhr.onloadend=function(){var resdata=xhr.responseText;if("json"==type)try{resdata=JSON.parse(xhr.responseText)}catch(e){resdata=null}200==this.status?fulfill(resdata,xhr):reject(resdata,xhr)},xhr.send(data)})},convertVideoLinksToIframes:function(){var $this=this,video_links=d.querySelectorAll("a[data-video-id]");Array.prototype.forEach.call(video_links,function(el,i){var id=el.getAttribute("data-video-id"),provider=el.getAttribute("data-video-provider"),asset=el.getAttribute("data-video-thumb"),height=370,ratio="",thumb="",src="";(data_width=el.getAttribute("data-video-width"))&&(data_height=el.getAttribute("data-video-height"))&&(height=data_height/data_width*480,ratio=data_width/data_height==16/9?"16-9":"4-3"),thumb=0==asset.indexOf("http")||-1!=asset.indexOf(".")?asset:MP_BASE_URL+"/getImage?src="+asset+"&w=480&o=1","youtube"==provider&&(ratio="16-9",src="https://www.youtube-nocookie.com/embed/"+id+"?enablejsapi=1&rel=0&showinfo=0&autoplay=1"),"vimeo"==provider&&(src="https://player.vimeo.com/video/"+id+"?color=ffffff&title=0&byline=0&portrait=0&autoplay=1");var container=d.createElement("div");container.classList.add("video_embed_container"),container.classList.add("ratio-"+ratio);var iframe=d.createElement("iframe");iframe.classList.add("video_embed"),iframe.setAttribute("width",480),iframe.setAttribute("height",height),iframe.setAttribute("src","about:blank"),iframe.setAttribute("data-src",src),iframe.setAttribute("data-provider",provider),iframe.setAttribute("src","about:blank"),iframe.setAttribute("allow","autoplay; fullscreen"),iframe.style["background-image"]="url("+thumb+")",iframe.getAttribute("id")||iframe.setAttribute("id","player_"+Math.random().toString(36).substring(2)),iframe.tabIndex=-1,container.appendChild(iframe);var play_button=d.createElement("a");play_button.setAttribute("class","icon-play"),play_button.setAttribute("href","#"),play_button.tabIndex=0,container.appendChild(play_button),el.parentNode.insertBefore(container,el),play_button.addEventListener("click",function(e){e&&e.preventDefault(),"1"==Cookie.get("loadExternalVideos")?$this.loadVideo(iframe):$this.displayPrivacyNotice(iframe)})})},replaceVideoLink:function(){var $this=this,video_links=d.querySelectorAll(".video_embed");Array.prototype.forEach.call(video_links,function(iframe,i){iframe.tabIndex=-1,iframe.getAttribute("id")||iframe.setAttribute("id","player_"+Math.random().toString(36).substring(2)),iframe.nextElementSibling.addEventListener("click",function(e){e&&e.preventDefault(),"1"==Cookie.get("loadExternalVideos")?$this.loadVideo(iframe):$this.displayPrivacyNotice(iframe)})})},displayPrivacyNotice:function(target){var $this=this,banner=d.getElementById("privacy-notice");banner.style.display="block";var lastFocus=target;banner.tabIndex=-1,banner.setAttribute("role","dialog"),banner.focus();var form=d.getElementById("privacy-notice-form");form.addEventListener("submit",function(e){e&&e.preventDefault();var loadExternalVideos=new FormData(form).get("loadExternalVideos");Cookie.set("loadExternalVideos",loadExternalVideos),loadExternalVideos&&target&&"IFRAME"==target.nodeName&&$this.loadVideo(target),banner.style.display="",lastFocus.focus()}),form.addEventListener("reset",function(e){banner.style.display="",lastFocus.focus()})},loadVideo:function(iframe){var $this=this,id=iframe.getAttribute("id");volume=iframe.dataset.volume||50,iframe.focus(),iframe.removeAttribute("tabindex"),iframe.setAttribute("src",iframe.getAttribute("data-src")),iframe.style["background-image"]="","youtube"==iframe.dataset.provider&&this.callPlayer(id,function(){$this.callPlayer(id,"setVolume",[volume,!0]),$this.callPlayer(id,"playVideo")})},callPlayer:function(frame_id,func,args){var $this=this;window.jQuery&&frame_id instanceof jQuery&&(frame_id=frame_id.get(0).id);var iframe=document.getElementById(frame_id);iframe&&"IFRAME"!=iframe.tagName.toUpperCase()&&(iframe=iframe.getElementsByTagName("iframe")[0]),this.callPlayer.queue||(this.callPlayer.queue={});var queue=this.callPlayer.queue[frame_id],domReady="complete"==document.readyState;if(domReady&&!iframe)window.console&&console.log("callPlayer: Frame not found; id="+frame_id),queue&&clearInterval(queue.poller);else if("listening"===func)iframe&&iframe.contentWindow&&(func='{"event":"listening","id":'+JSON.stringify(""+frame_id)+"}",iframe.contentWindow.postMessage(func,"*"));else if(queue&&queue.ready||domReady&&(!iframe||iframe.contentWindow)&&"function"!=typeof func){if(iframe&&iframe.contentWindow){if(func.call)return func();iframe.contentWindow.postMessage(JSON.stringify({event:"command",func:func,args:args||[],id:frame_id}),"*")}}else(queue=queue||(this.callPlayer.queue[frame_id]=[])).push([func,args]),"poller"in queue||(queue.poller=setInterval(function(){$this.callPlayer(frame_id,"listening")},250),messageEvent(1,function runOnceReady(e){if(!iframe){if(!(iframe=document.getElementById(frame_id)))return;if("IFRAME"!=iframe.tagName.toUpperCase()&&!(iframe=iframe.getElementsByTagName("iframe")[0]))return}if(e.source===iframe.contentWindow)for(clearInterval(queue.poller),queue.ready=!0,messageEvent(0,runOnceReady);tmp=queue.shift();)$this.callPlayer(frame_id,tmp[0],tmp[1])}));function messageEvent(add,listener){var w3=add?window.addEventListener:window.removeEventListener;w3?w3("message",listener,!1):(add?window.attachEvent:window.detachEvent)("onmessage",listener)}}},Cookie={lifeTime:"30",set:function(key,value,lifeTime){if(key&&(value||0==value)){lifeTime||0==lifeTime||(lifeTime=this.lifeTime);var expirationDate=new Date;expirationDate.setTime(expirationDate.getTime()+864e5*lifeTime),d.cookie=key+"="+value+";expires="+expirationDate.toUTCString()+"; path=/"}},get:function(key){if(""!=d.cookie){var cockie=d.cookie.split("; ").reduce(function(result,pairStr){var arr=pairStr.split("=");return 2===arr.length&&(result[arr[0]]=arr[1]),result},{});return key?cockie[key]:cockie}},destroy:function(key){this.set(key,"",0)}},SimpleLightbox={selector:"",group:null,active:!1,currentItem:null,currentGallery:null,galleries:[],captions:[],img:d.createElement("img"),lightbox:d.createElement("div"),wrap:d.createElement("div"),caption:d.createElement("div"),closeButton:d.createElement("a"),prevButton:d.createElement("a"),nextButton:d.createElement("a"),lastFocus:null,init:function(options){var $this=this;if(options){if("string"==typeof options?this.selector=options:Object.keys(options).forEach(function(k){$this[k]=options[k]}),this.lightbox.setAttribute("class","lightbox"),this.lightbox.setAttribute("role","dialog"),this.lightbox.setAttribute("aria-hidden","true"),this.lightbox.tabIndex=-1,d.querySelector("body").appendChild(this.lightbox),this.prevButton.setAttribute("href","#"),this.nextButton.setAttribute("href","#"),this.closeButton.setAttribute("href","#"),this.prevButton.setAttribute("aria-label","previous"),this.nextButton.setAttribute("aria-label","next"),this.closeButton.setAttribute("aria-label","close"),this.prevButton.classList.add("prev"),this.nextButton.classList.add("next"),this.closeButton.classList.add("icon-close"),this.lightbox.appendChild(this.wrap),this.lightbox.appendChild(this.prevButton),this.lightbox.appendChild(this.nextButton),this.lightbox.appendChild(this.closeButton),this.wrap.appendChild(this.img),this.group){var groups=d.querySelectorAll(this.group);Array.prototype.forEach.call(groups,function(el,i){$this.galleries.push(el.querySelectorAll($this.selector))})}else this.galleries.push(d.querySelectorAll(this.selector));Array.prototype.forEach.call(this.galleries,function(gallery,k){$this.captions[k]={},Array.prototype.forEach.call(gallery,function(el,i){el.addEventListener("click",function(e){e&&e.preventDefault(),$this.lastFocus=el||d.activeElement,$this.active=!0,$this.currentItem=i,$this.currentGallery=k,$this.update()});var node=el.parentNode.querySelector("figcaption");node?$this.captions[k][i]=node.innerHTML:el.getAttribute("title")?$this.captions[k][i]=el.getAttribute("title"):el.dataset.title&&($this.captions[k][i]=el.dataset.title)})}),this.prevButton.addEventListener("click",function(e){e&&(e.preventDefault(),e.stopPropagation()),$this.prev(e)}),this.nextButton.addEventListener("click",function(e){e&&(e.preventDefault(),e.stopPropagation()),$this.next(e)}),this.closeButton.addEventListener("click",function(e){e&&e.preventDefault()}),this.lightbox.addEventListener("click",function(e){e&&"IMG"==e.target.nodeName||$this.close(e)}),d.addEventListener("focus",function(e){$this.active&&!$this.lightbox.contains(e.target)&&(e.stopPropagation(),$this.lightbox.focus())},!0),d.addEventListener("keydown",function(e){$this.active&&(37==e.keyCode&&$this.prev(e),39==e.keyCode&&$this.next(e),27==e.keyCode&&$this.close(e))})}},update:function(){if(!this.active)return this.lightbox.classList.remove("active"),this.lightbox.setAttribute("aria-hidden","true"),void this.lastFocus.focus();this.lightbox.classList.add("active"),this.lightbox.focus(),0==this.currentItem?this.prevButton.classList.add("hidden"):this.prevButton.classList.remove("hidden"),this.currentItem==this.galleries[this.currentGallery].length-1?this.nextButton.classList.add("hidden"):this.nextButton.classList.remove("hidden"),this.img.setAttribute("src",this.galleries[this.currentGallery][this.currentItem].getAttribute("href")),this.captions[this.currentGallery][this.currentItem]?(this.caption.innerHTML=this.captions[this.currentGallery][this.currentItem],this.wrap.appendChild(this.caption)):this.wrap.contains(this.caption)&&this.wrap.removeChild(this.caption)},prev:function(e){this.galleries[this.currentGallery][this.currentItem-1]&&(this.currentItem-=1,this.update())},next:function(e){this.galleries[this.currentGallery][this.currentItem+1]&&(this.currentItem+=1,this.update())},close:function(e){this.active=!1,this.update()}},SimpleCarousel={selector:"",carousels:[],autoplay:!0,duration:15e3,init:function(options){var $this=this;options&&("string"==typeof options?this.selector=options:Object.keys(options).forEach(function(k){$this[k]=options[k]}),Array.prototype.forEach.call(d.querySelectorAll(this.selector),function(node,k){$this.carousels.push({paused:!1,node:node,interval:null})}),this.carousels.length&&Array.prototype.forEach.call(this.carousels,function(carousel,k){var pauseButton=d.createElement("a");pauseButton.setAttribute("href","#"),pauseButton.classList.add("icon-pause"),pauseButton.setAttribute("aria-label","start/stop image carousel"),pauseButton.tabIndex=0,carousel.node.appendChild(pauseButton),carousel.node.addEventListener("click",function(e){e&&e.preventDefault(),carousel.paused=!carousel.paused,carousel.paused?(pauseButton.classList.remove("icon-pause"),pauseButton.classList.add("icon-play"),$this.pause(carousel)):(pauseButton.classList.remove("icon-play"),pauseButton.classList.add("icon-pause"),$this.play(carousel))}),MP.visible(function(){$this.play(carousel)},function(){$this.pause(carousel)}),$this.autoplay&&!carousel.paused&&$this.play(carousel)}))},play:function(carousel){return!carousel.paused&&(carousel.interval||(carousel.interval=this.animate(carousel)),carousel.interval)},pause:function(carousel){window.clearInterval(carousel.interval),carousel.interval=!1},animate:function(carousel){return setInterval(function(){var current=carousel.node.querySelector(".current"),next=current.nextElementSibling;next&&"A"!=next.nodeName||(next=carousel.node.firstElementChild),"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"==next.getAttribute("src")&&next.setAttribute("src",next.dataset.src),current.classList.remove("current"),next.classList.add("current")},this.duration)}};MP.Cookie=Cookie,MP.Lightbox=SimpleLightbox,MP.Carousel=SimpleCarousel,g.MP=MP}(this,document);